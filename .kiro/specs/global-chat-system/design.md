# –î–æ–∫—É–º–µ–Ω—Ç –¥–∏–∑–∞–π–Ω–∞: –°–∏—Å—Ç–µ–º–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —á–∞—Ç–∞

## –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —á–∞—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π RPG –∏–≥—Ä–µ –Ω–∞ React. –°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –º–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω—ã–π —á–∞—Ç, —ç–º–æ–¥–∑–∏/—Å—Ç–∏–∫–µ—Ä—ã, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π, –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∏–≥—Ä–æ–∫–æ–≤, –∫–æ–º–∞–Ω–¥—ã —á–∞—Ç–∞ –∏ —Å–∏–º—É–ª—è—Ü–∏—é NPC-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

### –¶–µ–ª–∏ –¥–∏–∑–∞–π–Ω–∞

- –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞–Ω–∞–ª–æ–≤
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø–ª–∞–≤–Ω—É—é —Ä–∞–±–æ—Ç—É —á–∞—Ç–∞ –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–≥—Ä—ã
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ NPC-—Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∂–∏–≤–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —á–∞—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏–≥—Ä–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- –û–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ localStorage

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- React 18+ —Å —Ö—É–∫–∞–º–∏ (useState, useEffect, useRef, useMemo, useCallback)
- Tailwind CSS –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
- Lucide React –¥–ª—è –∏–∫–æ–Ω–æ–∫
- localStorage –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —á–∞—Ç–∞
- React.memo –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ —á–∞—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

1. **ChatPanel**: –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–∞—Ç–∞ (–ø—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å)
2. **ChatToggleButton**: –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è —á–∞—Ç–∞
3. **ChannelTabs**: –í–∫–ª–∞–¥–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤
4. **MessageList**: –í–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
5. **MessageInput**: –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–æ–º–∞–Ω–¥
6. **EmojiPicker**: –ü–∞–Ω–µ–ª—å –≤—ã–±–æ—Ä–∞ —ç–º–æ–¥–∑–∏
7. **StickerPicker**: –ü–∞–Ω–µ–ª—å –≤—ã–±–æ—Ä–∞ —Å—Ç–∏–∫–µ—Ä–æ–≤
8. **ChatSettings**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞
9. **NPCMessageGenerator**: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä NPC-—Å–æ–æ–±—â–µ–Ω–∏–π

### –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö


#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

```javascript
interface Message {
  id: string;
  channelId: string;
  author: {
    id: string;
    name: string;
    level: number;
    avatarId: number;
    isNPC: boolean;
  };
  content: string;
  timestamp: number;
  type: 'text' | 'sticker' | 'system';
  stickerId?: number;
  replyTo?: {
    messageId: string;
    authorName: string;
    content: string;
  };
  mentions?: string[];
}
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–Ω–∞–ª–∞

```javascript
interface Channel {
  id: string;
  name: string;
  color: string;
  icon: LucideIcon;
  messages: Message[];
  unreadCount: number;
  maxMessages: number;
}
```

#### –°–æ—Å—Ç–æ—è–Ω–∏–µ —á–∞—Ç–∞

```javascript
interface ChatState {
  isOpen: boolean;
  activeChannelId: string;
  channels: Record<string, Channel>;
  blockedPlayers: string[];
  settings: ChatSettings;
  lastMessageTime: number;
  cooldownRemaining: number;
  spamDetection: {
    lastMessages: string[];
    spamBlockedUntil: number;
  };
}
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞

```javascript
interface ChatSettings {
  fontSize: 'small' | 'medium' | 'large';
  showTimestamps: boolean;
  showAvatars: boolean;
  soundEnabled: boolean;
  profanityFilter: boolean;
  opacity: number; // 0-100
}
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

### 1. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –¥–∞–Ω–Ω—ã–µ


#### –ö–∞–Ω–∞–ª—ã —á–∞—Ç–∞

```javascript
const CHAT_CHANNELS = [
  {
    id: 'general',
    name: '–û–±—â–∏–π',
    color: 'bg-blue-500',
    icon: MessageSquare,
    maxMessages: 100
  },
  {
    id: 'trade',
    name: '–¢–æ—Ä–≥–æ–≤–ª—è',
    color: 'bg-yellow-500',
    icon: ShoppingBag,
    maxMessages: 100
  },
  {
    id: 'help',
    name: '–ü–æ–º–æ—â—å',
    color: 'bg-green-500',
    icon: Info,
    maxMessages: 100
  }
];
```

#### –≠–º–æ–¥–∑–∏

```javascript
const EMOJI_CATEGORIES = {
  emotions: {
    name: '–≠–º–æ—Ü–∏–∏',
    emojis: ['üòÄ', 'üòÇ', 'üòç', 'üòé', 'üò¢', 'üò°', 'ü§î', 'üò±']
  },
  actions: {
    name: '–î–µ–π—Å—Ç–≤–∏—è',
    emojis: ['üëç', 'üëé', 'üëè', 'üôè', 'üí™', '‚úåÔ∏è', 'ü§ù', 'üëã']
  },
  items: {
    name: '–ü—Ä–µ–¥–º–µ—Ç—ã',
    emojis: ['‚öîÔ∏è', 'üõ°Ô∏è', 'üèπ', 'üîÆ', 'üíé', 'üëë', 'üéÅ', 'üí∞']
  }
};

const ALL_EMOJIS = Object.values(EMOJI_CATEGORIES)
  .flatMap(cat => cat.emojis);
```

#### –°—Ç–∏–∫–µ—Ä—ã

```javascript
const STICKERS = [
  { id: 1, name: '–ü–æ–±–µ–¥–∞', emoji: 'üéâ', category: 'celebration' },
  { id: 2, name: '–ü–æ—Ä–∞–∂–µ–Ω–∏–µ', emoji: 'üíÄ', category: 'combat' },
  { id: 3, name: '–£–¥–∞—á–∞', emoji: 'üçÄ', category: 'general' },
  { id: 4, name: '–°–∏–ª–∞', emoji: 'üí™', category: 'combat' },
  { id: 5, name: '–ú–∞–≥–∏—è', emoji: '‚ú®', category: 'magic' },
  { id: 6, name: '–î—Ä–∞–∫–æ–Ω', emoji: 'üêâ', category: 'creatures' },
  { id: 7, name: '–ú–µ—á', emoji: '‚öîÔ∏è', category: 'items' },
  { id: 8, name: '–©–∏—Ç', emoji: 'üõ°Ô∏è', category: 'items' },
  { id: 9, name: '–ó–µ–ª—å–µ', emoji: 'üß™', category: 'items' },
  { id: 10, name: '–°–æ–∫—Ä–æ–≤–∏—â–µ', emoji: 'üíé', category: 'items' }
];
```

#### –°–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤

```javascript
const PROFANITY_LIST = [
  '–ø–ª–æ—Ö–æ–µ_—Å–ª–æ–≤–æ1',
  '–ø–ª–æ—Ö–æ–µ_—Å–ª–æ–≤–æ2',
  '–ø–ª–æ—Ö–æ–µ_—Å–ª–æ–≤–æ3'
  // ... —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π —Å–ø–∏—Å–æ–∫
];
```

#### –ö–æ–º–∞–Ω–¥—ã —á–∞—Ç–∞

```javascript
const CHAT_COMMANDS = [
  {
    command: '/help',
    description: '–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥',
    usage: '/help'
  },
  {
    command: '/clear',
    description: '–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞',
    usage: '/clear'
  },
  {
    command: '/whisper',
    description: '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ª–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ',
    usage: '/whisper [–∏–º—è] [—Å–æ–æ–±—â–µ–Ω–∏–µ]'
  },
  {
    command: '/block',
    description: '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä–æ–∫–∞',
    usage: '/block [–∏–º—è]'
  },
  {
    command: '/unblock',
    description: '–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä–æ–∫–∞',
    usage: '/unblock [–∏–º—è]'
  }
];
```

### 2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ChatPanel

–ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–∞—Ç–∞, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –≤—Å–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.


```javascript
const ChatPanel = ({ player, isOpen, onToggle }) => {
  const [activeChannel, setActiveChannel] = useState('general');
  const [channels, setChannels] = useState(() => initializeChannels());
  const [blockedPlayers, setBlockedPlayers] = useState(() => 
    loadFromLocalStorage('chat_blocked_players', [])
  );
  const [settings, setSettings] = useState(() => 
    loadFromLocalStorage('chat_settings', DEFAULT_SETTINGS)
  );
  const [showEmojiPicker, setShowEmojiPicker] = useState(false);
  const [showStickerPicker, setShowStickerPicker] = useState(false);
  const [showSettings, setShowSettings] = useState(false);
  const [cooldownRemaining, setCooldownRemaining] = useState(0);
  const [spamState, setSpamState] = useState({
    lastMessages: [],
    blockedUntil: 0
  });

  // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ localStorage –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
  useEffect(() => {
    const savedMessages = loadFromLocalStorage('chat_messages', {});
    setChannels(prev => {
      const updated = { ...prev };
      Object.keys(savedMessages).forEach(channelId => {
        if (updated[channelId]) {
          updated[channelId].messages = savedMessages[channelId];
        }
      });
      return updated;
    });
  }, []);

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ localStorage
  useEffect(() => {
    const messagesToSave = {};
    Object.entries(channels).forEach(([id, channel]) => {
      messagesToSave[id] = channel.messages;
    });
    saveToLocalStorage('chat_messages', messagesToSave);
  }, [channels]);

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è
  useEffect(() => {
    saveToLocalStorage('chat_is_open', isOpen);
  }, [isOpen]);

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞
  useEffect(() => {
    saveToLocalStorage('chat_active_channel', activeChannel);
  }, [activeChannel]);

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è NPC-—Å–æ–æ–±—â–µ–Ω–∏–π
  useEffect(() => {
    const interval = setInterval(() => {
      if (Math.random() < 0.5) { // 50% —à–∞–Ω—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
        const randomChannel = ['general', 'trade', 'help'][
          Math.floor(Math.random() * 3)
        ];
        const npcMessage = generateNPCMessage(randomChannel);
        addMessage(randomChannel, npcMessage);
      }
    }, getRandomInt(10000, 30000)); // 10-30 —Å–µ–∫—É–Ω–¥

    return () => clearInterval(interval);
  }, []);

  // –ö—É–ª–¥–∞—É–Ω –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
  useEffect(() => {
    if (cooldownRemaining > 0) {
      const timer = setTimeout(() => {
        setCooldownRemaining(prev => Math.max(0, prev - 1));
      }, 1000);
      return () => clearTimeout(timer);
    }
  }, [cooldownRemaining]);

  const addMessage = useCallback((channelId, message) => {
    setChannels(prev => {
      const channel = prev[channelId];
      const updatedMessages = [...channel.messages, message];
      
      // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ 100 —Å–æ–æ–±—â–µ–Ω–∏–π
      if (updatedMessages.length > channel.maxMessages) {
        updatedMessages.shift();
      }

      // –£–≤–µ–ª–∏—á–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –∫–∞–Ω–∞–ª –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω
      const unreadCount = channelId !== activeChannel 
        ? channel.unreadCount + 1 
        : 0;

      return {
        ...prev,
        [channelId]: {
          ...channel,
          messages: updatedMessages,
          unreadCount
        }
      };
    });

    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
    if (!isOpen && message.mentions?.includes(player.name)) {
      playNotificationSound();
      showBrowserNotification(message);
    }
  }, [activeChannel, isOpen, player.name]);

  return (
    <div className={`fixed right-0 top-0 h-full transition-all duration-300 ${
      isOpen ? 'w-96' : 'w-0'
    }`}>
      {isOpen && (
        <div 
          className="h-full bg-slate-800 border-l border-slate-700 flex flex-col"
          style={{ opacity: settings.opacity / 100 }}
        >
          {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
          <ChatHeader 
            onClose={onToggle}
            onOpenSettings={() => setShowSettings(true)}
          />

          {/* –í–∫–ª–∞–¥–∫–∏ –∫–∞–Ω–∞–ª–æ–≤ */}
          <ChannelTabs
            channels={channels}
            activeChannel={activeChannel}
            onChannelChange={setActiveChannel}
          />

          {/* –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π */}
          <MessageList
            messages={channels[activeChannel].messages}
            blockedPlayers={blockedPlayers}
            settings={settings}
            player={player}
            onReply={handleReply}
            onBlock={handleBlock}
            onReport={handleReport}
          />

          {/* –ü–æ–ª–µ –≤–≤–æ–¥–∞ */}
          <MessageInput
            onSendMessage={handleSendMessage}
            cooldownRemaining={cooldownRemaining}
            spamBlocked={spamState.blockedUntil > Date.now()}
            onOpenEmoji={() => setShowEmojiPicker(true)}
            onOpenSticker={() => setShowStickerPicker(true)}
          />

          {/* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */}
          {showEmojiPicker && (
            <EmojiPicker
              onSelect={handleEmojiSelect}
              onClose={() => setShowEmojiPicker(false)}
            />
          )}
          {showStickerPicker && (
            <StickerPicker
              onSelect={handleStickerSelect}
              onClose={() => setShowStickerPicker(false)}
            />
          )}
          {showSettings && (
            <ChatSettings
              settings={settings}
              onUpdate={handleSettingsUpdate}
              onClose={() => setShowSettings(false)}
              blockedPlayers={blockedPlayers}
              onUnblock={handleUnblock}
            />
          )}
        </div>
      )}
    </div>
  );
};
```

### 3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ChatToggleButton

–ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è —á–∞—Ç–∞ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.


```javascript
const ChatToggleButton = ({ isOpen, unreadCount, hasNewMentions, onClick }) => {
  const [isPulsing, setIsPulsing] = useState(false);

  useEffect(() => {
    if (hasNewMentions && !isOpen) {
      setIsPulsing(true);
      const timer = setTimeout(() => setIsPulsing(false), 2000);
      return () => clearTimeout(timer);
    }
  }, [hasNewMentions, isOpen]);

  return (
    <button
      onClick={onClick}
      className={`fixed right-4 bottom-4 w-14 h-14 rounded-full bg-blue-600 
        hover:bg-blue-700 flex items-center justify-center shadow-lg 
        transition-all ${isPulsing ? 'animate-pulse' : ''}`}
    >
      {isOpen ? (
        <X size={24} className="text-white" />
      ) : (
        <>
          <MessageSquare size={24} className="text-white" />
          {unreadCount > 0 && (
            <span className="absolute -top-1 -right-1 bg-red-500 text-white 
              text-xs rounded-full w-6 h-6 flex items-center justify-center">
              {unreadCount > 99 ? '99+' : unreadCount}
            </span>
          )}
        </>
      )}
    </button>
  );
};
```

### 4. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ChannelTabs

–í–∫–ª–∞–¥–∫–∏ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –∫–∞–Ω–∞–ª–∞–º–∏.

```javascript
const ChannelTabs = ({ channels, activeChannel, onChannelChange }) => {
  return (
    <div className="flex border-b border-slate-700">
      {Object.entries(channels).map(([id, channel]) => {
        const Icon = channel.icon;
        const isActive = id === activeChannel;
        
        return (
          <button
            key={id}
            onClick={() => onChannelChange(id)}
            className={`flex-1 py-3 px-2 flex items-center justify-center gap-2 
              transition-colors relative ${
              isActive 
                ? 'bg-slate-700 text-white' 
                : 'text-slate-400 hover:text-white hover:bg-slate-750'
            }`}
          >
            <Icon size={18} />
            <span className="text-sm font-medium">{channel.name}</span>
            
            {channel.unreadCount > 0 && !isActive && (
              <span className="absolute top-1 right-1 bg-red-500 text-white 
                text-xs rounded-full w-5 h-5 flex items-center justify-center">
                {channel.unreadCount > 9 ? '9+' : channel.unreadCount}
              </span>
            )}
          </button>
        );
      })}
    </div>
  );
};
```

### 5. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç MessageList

–í–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.


```javascript
const MessageList = React.memo(({ 
  messages, 
  blockedPlayers, 
  settings, 
  player,
  onReply,
  onBlock,
  onReport 
}) => {
  const messagesEndRef = useRef(null);
  const [hoveredMessageId, setHoveredMessageId] = useState(null);

  // –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [messages]);

  // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
  const visibleMessages = useMemo(() => {
    return messages.filter(msg => 
      !blockedPlayers.includes(msg.author.id)
    );
  }, [messages, blockedPlayers]);

  return (
    <div className="flex-1 overflow-y-auto p-4 space-y-3">
      {visibleMessages.map(message => (
        <MessageItem
          key={message.id}
          message={message}
          settings={settings}
          isOwnMessage={message.author.id === player.id}
          isMentioned={message.mentions?.includes(player.name)}
          isHovered={hoveredMessageId === message.id}
          onMouseEnter={() => setHoveredMessageId(message.id)}
          onMouseLeave={() => setHoveredMessageId(null)}
          onReply={() => onReply(message)}
          onBlock={() => onBlock(message.author.id)}
          onReport={() => onReport(message.id)}
        />
      ))}
      <div ref={messagesEndRef} />
    </div>
  );
});
```

### 6. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç MessageItem

–û—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –º–µ–Ω—é.

```javascript
const MessageItem = React.memo(({ 
  message, 
  settings, 
  isOwnMessage,
  isMentioned,
  isHovered,
  onMouseEnter,
  onMouseLeave,
  onReply,
  onBlock,
  onReport
}) => {
  const AvatarIcon = AVATARS_DB.find(a => a.id === message.author.avatarId)?.icon || User;
  const avatarColor = AVATARS_DB.find(a => a.id === message.author.avatarId)?.color || 'bg-gray-500';

  const fontSizeClass = {
    small: 'text-sm',
    medium: 'text-base',
    large: 'text-lg'
  }[settings.fontSize];

  return (
    <div
      className={`flex gap-3 p-2 rounded-lg transition-colors ${
        isMentioned ? 'bg-blue-900/30 border-l-4 border-blue-500' : ''
      } ${isHovered ? 'bg-slate-700/50' : ''}`}
      onMouseEnter={onMouseEnter}
      onMouseLeave={onMouseLeave}
    >
      {/* –ê–≤–∞—Ç–∞—Ä */}
      {settings.showAvatars && (
        <div className={`w-10 h-10 rounded-full ${avatarColor} 
          flex items-center justify-center flex-shrink-0`}>
          <AvatarIcon size={20} className="text-white" />
        </div>
      )}

      {/* –ö–æ–Ω—Ç–µ–Ω—Ç */}
      <div className="flex-1 min-w-0">
        {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
        <div className="flex items-center gap-2 mb-1">
          <span className="font-bold text-white">
            {message.author.name}
          </span>
          <span className="text-xs text-slate-400">
            –£—Ä. {message.author.level}
          </span>
          {message.author.isNPC && (
            <span className="text-xs bg-slate-600 px-2 py-0.5 rounded">
              NPC
            </span>
          )}
          {settings.showTimestamps && (
            <span className="text-xs text-slate-500">
              {formatTime(message.timestamp)}
            </span>
          )}
        </div>

        {/* –û—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ */}
        {message.replyTo && (
          <div className="bg-slate-700/50 border-l-2 border-slate-500 
            pl-2 py-1 mb-2 text-sm text-slate-400">
            <span className="font-semibold">{message.replyTo.authorName}:</span>{' '}
            {message.replyTo.content.substring(0, 50)}
            {message.replyTo.content.length > 50 && '...'}
          </div>
        )}

        {/* –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è */}
        {message.type === 'text' && (
          <p className={`text-slate-200 break-words ${fontSizeClass}`}>
            {message.content}
          </p>
        )}

        {/* –°—Ç–∏–∫–µ—Ä */}
        {message.type === 'sticker' && (
          <div className="text-6xl">
            {STICKERS.find(s => s.id === message.stickerId)?.emoji}
          </div>
        )}

        {/* –°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ */}
        {message.type === 'system' && (
          <p className="text-yellow-400 italic text-sm">
            {message.content}
          </p>
        )}
      </div>

      {/* –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é */}
      {isHovered && !isOwnMessage && (
        <div className="flex gap-1 flex-shrink-0">
          <button
            onClick={onReply}
            className="p-1 hover:bg-slate-600 rounded"
            title="–û—Ç–≤–µ—Ç–∏—Ç—å"
          >
            <MessageSquare size={16} className="text-slate-400" />
          </button>
          <button
            onClick={() => navigator.clipboard.writeText(message.content)}
            className="p-1 hover:bg-slate-600 rounded"
            title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å"
          >
            <Copy size={16} className="text-slate-400" />
          </button>
          <button
            onClick={onBlock}
            className="p-1 hover:bg-slate-600 rounded"
            title="–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"
          >
            <Ban size={16} className="text-slate-400" />
          </button>
          <button
            onClick={onReport}
            className="p-1 hover:bg-slate-600 rounded"
            title="–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è"
          >
            <Flag size={16} className="text-slate-400" />
          </button>
        </div>
      )}
    </div>
  );
});
```

### 7. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç MessageInput

–ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–æ–º–∞–Ω–¥, —ç–º–æ–¥–∑–∏ –∏ –∫—É–ª–¥–∞—É–Ω–∞.


```javascript
const MessageInput = ({ 
  onSendMessage, 
  cooldownRemaining, 
  spamBlocked,
  onOpenEmoji,
  onOpenSticker 
}) => {
  const [message, setMessage] = useState('');
  const [replyTo, setReplyTo] = useState(null);
  const [showCommandSuggestions, setShowCommandSuggestions] = useState(false);
  const inputRef = useRef(null);

  // Debounce –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞
  const debouncedMessage = useDebounce(message, 300);

  // –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
  useEffect(() => {
    if (message.startsWith('/')) {
      setShowCommandSuggestions(true);
    } else {
      setShowCommandSuggestions(false);
    }
  }, [message]);

  const handleSend = () => {
    if (!message.trim()) return;
    if (cooldownRemaining > 0) return;
    if (spamBlocked) return;
    if (message.length > 500) {
      addNotification('–°–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ (–º–∞–∫—Å. 500 —Å–∏–º–≤–æ–ª–æ–≤)', 'error');
      return;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ–º–∞–Ω–¥—É
    if (message.startsWith('/')) {
      handleCommand(message);
    } else {
      onSendMessage(message, replyTo);
    }

    setMessage('');
    setReplyTo(null);
  };

  const handleCommand = (cmd) => {
    const parts = cmd.split(' ');
    const command = parts[0].toLowerCase();

    switch (command) {
      case '/help':
        showCommandHelp();
        break;
      case '/clear':
        clearChatHistory();
        break;
      case '/whisper':
        if (parts.length < 3) {
          addNotification('–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: /whisper [–∏–º—è] [—Å–æ–æ–±—â–µ–Ω–∏–µ]', 'error');
        } else {
          sendWhisper(parts[1], parts.slice(2).join(' '));
        }
        break;
      case '/block':
        if (parts.length < 2) {
          addNotification('–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: /block [–∏–º—è]', 'error');
        } else {
          blockPlayer(parts[1]);
        }
        break;
      case '/unblock':
        if (parts.length < 2) {
          addNotification('–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: /unblock [–∏–º—è]', 'error');
        } else {
          unblockPlayer(parts[1]);
        }
        break;
      default:
        addNotification('–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /help', 'error');
    }
  };

  const handleKeyPress = (e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      handleSend();
    }
  };

  return (
    <div className="border-t border-slate-700 p-4">
      {/* –û—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ */}
      {replyTo && (
        <div className="bg-slate-700 rounded-lg p-2 mb-2 flex items-center justify-between">
          <div className="text-sm">
            <span className="text-slate-400">–û—Ç–≤–µ—Ç –Ω–∞:</span>{' '}
            <span className="text-white font-semibold">{replyTo.authorName}</span>
          </div>
          <button
            onClick={() => setReplyTo(null)}
            className="text-slate-400 hover:text-white"
          >
            <X size={16} />
          </button>
        </div>
      )}

      {/* –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ */}
      {showCommandSuggestions && (
        <div className="bg-slate-700 rounded-lg mb-2 max-h-40 overflow-y-auto">
          {CHAT_COMMANDS
            .filter(cmd => cmd.command.startsWith(message.split(' ')[0]))
            .map(cmd => (
              <button
                key={cmd.command}
                onClick={() => setMessage(cmd.usage)}
                className="w-full text-left p-2 hover:bg-slate-600 transition-colors"
              >
                <div className="font-mono text-sm text-blue-400">{cmd.command}</div>
                <div className="text-xs text-slate-400">{cmd.description}</div>
              </button>
            ))}
        </div>
      )}

      {/* –ü–æ–ª–µ –≤–≤–æ–¥–∞ */}
      <div className="flex gap-2">
        <button
          onClick={onOpenEmoji}
          className="p-2 hover:bg-slate-700 rounded-lg transition-colors"
          title="–≠–º–æ–¥–∑–∏"
        >
          <Smile size={20} className="text-slate-400" />
        </button>

        <button
          onClick={onOpenSticker}
          className="p-2 hover:bg-slate-700 rounded-lg transition-colors"
          title="–°—Ç–∏–∫–µ—Ä—ã"
        >
          <Image size={20} className="text-slate-400" />
        </button>

        <input
          ref={inputRef}
          type="text"
          value={message}
          onChange={(e) => setMessage(e.target.value)}
          onKeyPress={handleKeyPress}
          placeholder={
            spamBlocked 
              ? '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –∑–∞ —Å–ø–∞–º...' 
              : cooldownRemaining > 0 
              ? `–ü–æ–¥–æ–∂–¥–∏—Ç–µ ${cooldownRemaining}—Å...`
              : '–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...'
          }
          disabled={cooldownRemaining > 0 || spamBlocked}
          maxLength={500}
          className="flex-1 bg-slate-700 rounded-lg px-4 py-2 text-white 
            placeholder-slate-400 focus:outline-none focus:ring-2 
            focus:ring-blue-500 disabled:opacity-50"
        />

        <button
          onClick={handleSend}
          disabled={!message.trim() || cooldownRemaining > 0 || spamBlocked}
          className="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg 
            transition-colors disabled:opacity-50 disabled:cursor-not-allowed
            flex items-center gap-2"
        >
          {cooldownRemaining > 0 ? (
            <span className="text-sm">{cooldownRemaining}s</span>
          ) : (
            <Send size={20} className="text-white" />
          )}
        </button>
      </div>

      {/* –°—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤ */}
      <div className="text-xs text-slate-500 mt-1 text-right">
        {message.length}/500
      </div>
    </div>
  );
};
```

### 8. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç EmojiPicker

–ü–∞–Ω–µ–ª—å –≤—ã–±–æ—Ä–∞ —ç–º–æ–¥–∑–∏ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏.


```javascript
const EmojiPicker = ({ onSelect, onClose }) => {
  const [activeCategory, setActiveCategory] = useState('emotions');

  return (
    <div className="absolute bottom-20 left-4 bg-slate-800 rounded-lg 
      shadow-xl border border-slate-700 p-4 w-80 z-50">
      {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
      <div className="flex items-center justify-between mb-3">
        <h3 className="font-bold text-white">–≠–º–æ–¥–∑–∏</h3>
        <button onClick={onClose} className="text-slate-400 hover:text-white">
          <X size={20} />
        </button>
      </div>

      {/* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */}
      <div className="flex gap-2 mb-3">
        {Object.entries(EMOJI_CATEGORIES).map(([key, category]) => (
          <button
            key={key}
            onClick={() => setActiveCategory(key)}
            className={`px-3 py-1 rounded-lg text-sm transition-colors ${
              activeCategory === key
                ? 'bg-blue-600 text-white'
                : 'bg-slate-700 text-slate-400 hover:text-white'
            }`}
          >
            {category.name}
          </button>
        ))}
      </div>

      {/* –≠–º–æ–¥–∑–∏ */}
      <div className="grid grid-cols-8 gap-2">
        {EMOJI_CATEGORIES[activeCategory].emojis.map((emoji, index) => (
          <button
            key={index}
            onClick={() => {
              onSelect(emoji);
              onClose();
            }}
            className="text-2xl hover:bg-slate-700 rounded p-2 transition-colors"
          >
            {emoji}
          </button>
        ))}
      </div>
    </div>
  );
};
```

### 9. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç StickerPicker

–ü–∞–Ω–µ–ª—å –≤—ã–±–æ—Ä–∞ —Å—Ç–∏–∫–µ—Ä–æ–≤.

```javascript
const StickerPicker = ({ onSelect, onClose }) => {
  const [activeCategory, setActiveCategory] = useState('all');

  const categories = useMemo(() => {
    const cats = new Set(STICKERS.map(s => s.category));
    return ['all', ...Array.from(cats)];
  }, []);

  const filteredStickers = useMemo(() => {
    if (activeCategory === 'all') return STICKERS;
    return STICKERS.filter(s => s.category === activeCategory);
  }, [activeCategory]);

  return (
    <div className="absolute bottom-20 left-4 bg-slate-800 rounded-lg 
      shadow-xl border border-slate-700 p-4 w-80 z-50">
      {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
      <div className="flex items-center justify-between mb-3">
        <h3 className="font-bold text-white">–°—Ç–∏–∫–µ—Ä—ã</h3>
        <button onClick={onClose} className="text-slate-400 hover:text-white">
          <X size={20} />
        </button>
      </div>

      {/* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */}
      <div className="flex gap-2 mb-3 overflow-x-auto">
        {categories.map(cat => (
          <button
            key={cat}
            onClick={() => setActiveCategory(cat)}
            className={`px-3 py-1 rounded-lg text-sm whitespace-nowrap 
              transition-colors ${
              activeCategory === cat
                ? 'bg-blue-600 text-white'
                : 'bg-slate-700 text-slate-400 hover:text-white'
            }`}
          >
            {cat === 'all' ? '–í—Å–µ' : cat}
          </button>
        ))}
      </div>

      {/* –°—Ç–∏–∫–µ—Ä—ã */}
      <div className="grid grid-cols-5 gap-2 max-h-60 overflow-y-auto">
        {filteredStickers.map(sticker => (
          <button
            key={sticker.id}
            onClick={() => {
              onSelect(sticker);
              onClose();
            }}
            className="text-4xl hover:bg-slate-700 rounded p-2 transition-colors"
            title={sticker.name}
          >
            {sticker.emoji}
          </button>
        ))}
      </div>
    </div>
  );
};
```

### 10. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ChatSettings

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏.


```javascript
const ChatSettings = ({ 
  settings, 
  onUpdate, 
  onClose, 
  blockedPlayers,
  onUnblock 
}) => {
  const [localSettings, setLocalSettings] = useState(settings);

  const handleSave = () => {
    onUpdate(localSettings);
    onClose();
  };

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
      <div className="bg-slate-800 rounded-lg p-6 w-full max-w-md">
        {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
        <div className="flex items-center justify-between mb-4">
          <h2 className="text-xl font-bold text-white">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞</h2>
          <button onClick={onClose} className="text-slate-400 hover:text-white">
            <X size={24} />
          </button>
        </div>

        <div className="space-y-4">
          {/* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */}
          <div>
            <label className="block text-sm font-medium text-slate-300 mb-2">
              –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞
            </label>
            <div className="flex gap-2">
              {['small', 'medium', 'large'].map(size => (
                <button
                  key={size}
                  onClick={() => setLocalSettings(prev => ({ ...prev, fontSize: size }))}
                  className={`flex-1 py-2 rounded-lg transition-colors ${
                    localSettings.fontSize === size
                      ? 'bg-blue-600 text-white'
                      : 'bg-slate-700 text-slate-400 hover:text-white'
                  }`}
                >
                  {size === 'small' && '–ú–∞–ª–µ–Ω—å–∫–∏–π'}
                  {size === 'medium' && '–°—Ä–µ–¥–Ω–∏–π'}
                  {size === 'large' && '–ë–æ–ª—å—à–æ–π'}
                </button>
              ))}
            </div>
          </div>

          {/* –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å */}
          <div>
            <label className="block text-sm font-medium text-slate-300 mb-2">
              –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å: {localSettings.opacity}%
            </label>
            <input
              type="range"
              min="0"
              max="100"
              value={localSettings.opacity}
              onChange={(e) => setLocalSettings(prev => ({ 
                ...prev, 
                opacity: parseInt(e.target.value) 
              }))}
              className="w-full"
            />
          </div>

          {/* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ */}
          <div className="space-y-2">
            <label className="flex items-center justify-between">
              <span className="text-slate-300">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏</span>
              <input
                type="checkbox"
                checked={localSettings.showTimestamps}
                onChange={(e) => setLocalSettings(prev => ({ 
                  ...prev, 
                  showTimestamps: e.target.checked 
                }))}
                className="w-5 h-5"
              />
            </label>

            <label className="flex items-center justify-between">
              <span className="text-slate-300">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∞–≤–∞—Ç–∞—Ä—ã</span>
              <input
                type="checkbox"
                checked={localSettings.showAvatars}
                onChange={(e) => setLocalSettings(prev => ({ 
                  ...prev, 
                  showAvatars: e.target.checked 
                }))}
                className="w-5 h-5"
              />
            </label>

            <label className="flex items-center justify-between">
              <span className="text-slate-300">–ó–≤—É–∫–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
              <input
                type="checkbox"
                checked={localSettings.soundEnabled}
                onChange={(e) => setLocalSettings(prev => ({ 
                  ...prev, 
                  soundEnabled: e.target.checked 
                }))}
                className="w-5 h-5"
              />
            </label>

            <label className="flex items-center justify-between">
              <span className="text-slate-300">–§–∏–ª—å—Ç—Ä –Ω–µ—Ü–µ–Ω–∑—É—Ä–Ω–æ–π –ª–µ–∫—Å–∏–∫–∏</span>
              <input
                type="checkbox"
                checked={localSettings.profanityFilter}
                onChange={(e) => setLocalSettings(prev => ({ 
                  ...prev, 
                  profanityFilter: e.target.checked 
                }))}
                className="w-5 h-5"
              />
            </label>
          </div>

          {/* –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ */}
          <div>
            <h3 className="text-sm font-medium text-slate-300 mb-2">
              –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ ({blockedPlayers.length}/50)
            </h3>
            <div className="bg-slate-700 rounded-lg p-2 max-h-40 overflow-y-auto">
              {blockedPlayers.length === 0 ? (
                <p className="text-slate-400 text-sm text-center py-2">
                  –ù–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
                </p>
              ) : (
                <div className="space-y-1">
                  {blockedPlayers.map(playerId => (
                    <div 
                      key={playerId}
                      className="flex items-center justify-between p-2 
                        bg-slate-600 rounded"
                    >
                      <span className="text-white text-sm">{playerId}</span>
                      <button
                        onClick={() => onUnblock(playerId)}
                        className="text-xs bg-red-600 hover:bg-red-700 
                          px-2 py-1 rounded"
                      >
                        –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
                      </button>
                    </div>
                  ))}
                </div>
              )}
            </div>
          </div>

          {/* –ö–Ω–æ–ø–∫–∏ */}
          <div className="flex gap-2 pt-4">
            <button
              onClick={handleSave}
              className="flex-1 bg-blue-600 hover:bg-blue-700 text-white 
                py-2 rounded-lg transition-colors"
            >
              –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
            </button>
            <button
              onClick={onClose}
              className="flex-1 bg-slate-700 hover:bg-slate-600 text-white 
                py-2 rounded-lg transition-colors"
            >
              –û—Ç–º–µ–Ω–∞
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};
```

## –õ–æ–≥–∏–∫–∞ –∏ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è NPC-—Å–æ–æ–±—â–µ–Ω–∏–π


```javascript
const NPC_NAMES = [
  '–ê—Ä—Ç—É—Ä', '–ú–µ—Ä–ª–∏–Ω', '–õ–∞–Ω—Å–µ–ª–æ—Ç', '–ì–≤–∏–Ω–µ–≤—Ä–∞', '–ú–æ—Ä–≥–∞–Ω–∞',
  '–ü–µ—Ä—Å–∏–≤–∞–ª—å', '–ì–∞–ª–∞—Ö–∞–¥', '–¢—Ä–∏—Å—Ç–∞–Ω', '–ò–∑–æ–ª—å–¥–∞', '–ë–µ–¥–∏–≤–µ—Ä',
  '–ö–µ–π', '–ì–∞—Ä–µ—Ç', '–ì–∞–≤–µ–π–Ω', '–≠–ª–µ–π–Ω', '–í–∏–≤–∏–∞–Ω–∞'
];

const MESSAGE_TEMPLATES = {
  general: [
    '–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!',
    '–ö—Ç–æ-–Ω–∏–±—É–¥—å —Ö–æ—á–µ—Ç –ø–æ–π—Ç–∏ –≤ –ø–æ–¥–∑–µ–º–µ–ª—å–µ?',
    '–¢–æ–ª—å–∫–æ —á—Ç–æ –¥–æ—Å—Ç–∏–≥ {level} —É—Ä–æ–≤–Ω—è!',
    '–≠—Ç–∞ –∏–≥—Ä–∞ –ø–æ—Ç—Ä—è—Å–∞—é—â–∞—è!',
    '–ö—Ç–æ-–Ω–∏–±—É–¥—å –∑–Ω–∞–µ—Ç, –≥–¥–µ –Ω–∞–π—Ç–∏ {resource}?',
    '–ò—â—É –≥—Ä—É–ø–ø—É –¥–ª—è –∫–≤–µ—Å—Ç–∞',
    '–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–º–æ—â—å!',
    '–ö—Ç–æ –æ–Ω–ª–∞–π–Ω?'
  ],
  trade: [
    '–ü—Ä–æ–¥–∞—é {item} –∑–∞ {price} –∑–æ–ª–æ—Ç–∞',
    '–ö—É–ø–ª—é {item}, –ø—Ä–µ–¥–ª–∞–≥–∞–π—Ç–µ —Ü–µ–Ω—É',
    '–û–±–º–µ–Ω—è—é {item1} –Ω–∞ {item2}',
    'WTS {item} - —à–µ–ø–Ω–∏—Ç–µ —Ü–µ–Ω—É',
    '–ò—â—É {item}, –∑–∞–ø–ª–∞—á—É —Ö–æ—Ä–æ—à–æ',
    '–†–∞—Å–ø—Ä–æ–¥–∞–∂–∞! {item} –≤—Å–µ–≥–æ –∑–∞ {price} –∑–æ–ª–æ—Ç–∞',
    '–ö—Ç–æ-–Ω–∏–±—É–¥—å –ø—Ä–æ–¥–∞–µ—Ç {item}?'
  ],
  help: [
    '–ö–∞–∫ –º–Ω–µ –ø–æ–≤—ã—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –±—ã—Å—Ç—Ä–µ–µ?',
    '–ì–¥–µ –Ω–∞–π—Ç–∏ {resource}?',
    '–ü–æ–º–æ–≥–∏—Ç–µ —Å –∫–≤–µ—Å—Ç–æ–º "{quest}"',
    '–ö–∞–∫–æ–π –∫–ª–∞—Å—Å –ª—É—á—à–µ –¥–ª—è –Ω–æ–≤–∏—á–∫–∞?',
    '–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫—Ä–∞—Ñ—Ç–∏–Ω–≥?',
    '–°–ø–∞—Å–∏–±–æ –∑–∞ —Å–æ–≤–µ—Ç!',
    '–ö—Ç–æ-–Ω–∏–±—É–¥—å –º–æ–∂–µ—Ç –æ–±—ä—è—Å–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –≥–∏–ª—å–¥–∏–π?',
    '–ì–¥–µ –ª—É—á—à–µ —Ñ–∞—Ä–º–∏—Ç—å –∑–æ–ª–æ—Ç–æ?'
  ]
};

const generateNPCMessage = (channelId) => {
  const name = NPC_NAMES[getRandomInt(0, NPC_NAMES.length - 1)];
  const level = getRandomInt(1, 50);
  const avatarId = getRandomInt(1, 15);
  
  const templates = MESSAGE_TEMPLATES[channelId] || MESSAGE_TEMPLATES.general;
  let content = templates[getRandomInt(0, templates.length - 1)];
  
  // –ó–∞–º–µ–Ω–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
  content = content
    .replace('{level}', level)
    .replace('{resource}', getRandomResource())
    .replace('{item}', getRandomItem())
    .replace('{item1}', getRandomItem())
    .replace('{item2}', getRandomItem())
    .replace('{price}', getRandomInt(100, 5000))
    .replace('{quest}', getRandomQuest());

  return {
    id: `npc_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
    channelId,
    author: {
      id: `npc_${name}_${level}`,
      name,
      level,
      avatarId,
      isNPC: true
    },
    content,
    timestamp: Date.now(),
    type: 'text',
    mentions: []
  };
};

const getRandomResource = () => {
  const resources = ['wood', 'iron_ore', 'gold_ore', 'crystal', 'mithril_ore'];
  return resources[getRandomInt(0, resources.length - 1)];
};

const getRandomItem = () => {
  const items = [
    '–°—Ç–∞–ª—å–Ω–æ–π –º–µ—á', '–ö–æ–∂–∞–Ω–∞—è –±—Ä–æ–Ω—è', '–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è',
    '–û–≥–Ω–µ–Ω–Ω—ã–π –∫–ª–∏–Ω–æ–∫', '–õ–∞—Ç—ã —Ä—ã—Ü–∞—Ä—è', '–≠–ª—å—Ñ–∏–π—Å–∫–∏–π –ª—É–∫'
  ];
  return items[getRandomInt(0, items.length - 1)];
};

const getRandomQuest = () => {
  const quests = [
    '–û—Ö–æ—Ç–∞ –Ω–∞ –≤–æ–ª–∫–æ–≤', '–°–±–æ—Ä —Ç—Ä–∞–≤', '–ó–∞—á–∏—Å—Ç–∫–∞ –ø–µ—â–µ—Ä—ã',
    '–ü–æ–∏—Å–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞', '–°–ø–∞—Å–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–Ω–∏'
  ];
  return quests[getRandomInt(0, quests.length - 1)];
};
```

### 2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

```javascript
const filterProfanity = (text, enabled) => {
  if (!enabled) return text;
  
  let filtered = text;
  PROFANITY_LIST.forEach(word => {
    const regex = new RegExp(word, 'gi');
    filtered = filtered.replace(regex, '***');
  });
  
  return filtered;
};

const detectSpam = (message, spamState) => {
  const now = Date.now();
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∑–∞ —Å–ø–∞–º
  if (spamState.blockedUntil > now) {
    return {
      isSpam: true,
      blocked: true,
      remainingTime: Math.ceil((spamState.blockedUntil - now) / 1000)
    };
  }
  
  // –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
  const recentMessages = [...spamState.lastMessages, message].slice(-3);
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è
  if (recentMessages.length === 3 && 
      recentMessages.every(msg => msg === message)) {
    return {
      isSpam: true,
      blocked: true,
      blockedUntil: now + 30000, // 30 —Å–µ–∫—É–Ω–¥
      lastMessages: []
    };
  }
  
  return {
    isSpam: false,
    blocked: false,
    lastMessages: recentMessages
  };
};
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π

```javascript
const detectMentions = (text, playerName) => {
  const mentions = [];
  const words = text.split(/\s+/);
  
  words.forEach(word => {
    if (word.startsWith('@')) {
      const mentionedName = word.substring(1);
      mentions.push(mentionedName);
    }
  });
  
  return {
    mentions,
    isMentioned: mentions.includes(playerName)
  };
};

const highlightMentions = (text) => {
  return text.replace(/@(\w+)/g, '<span class="text-blue-400 font-bold">@$1</span>');
};
```

### 4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```javascript
const playNotificationSound = () => {
  // –°–æ–∑–¥–∞—Ç—å –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  const audioContext = new (window.AudioContext || window.webkitAudioContext)();
  const oscillator = audioContext.createOscillator();
  const gainNode = audioContext.createGain();
  
  oscillator.connect(gainNode);
  gainNode.connect(audioContext.destination);
  
  oscillator.frequency.value = 800;
  oscillator.type = 'sine';
  
  gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
  gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
  
  oscillator.start(audioContext.currentTime);
  oscillator.stop(audioContext.currentTime + 0.5);
};

const showBrowserNotification = (message) => {
  if (!('Notification' in window)) return;
  
  if (Notification.permission === 'granted') {
    new Notification('–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ', {
      body: `${message.author.name}: ${message.content.substring(0, 50)}...`,
      icon: '/chat-icon.png',
      tag: 'chat-notification'
    });
  } else if (Notification.permission !== 'denied') {
    Notification.requestPermission().then(permission => {
      if (permission === 'granted') {
        showBrowserNotification(message);
      }
    });
  }
};

const updatePageTitle = (unreadCount) => {
  if (unreadCount > 0) {
    document.title = `(${unreadCount}) RPG Game - Chat`;
  } else {
    document.title = 'RPG Game';
  }
};
```

### 5. –£—Ç–∏–ª–∏—Ç—ã localStorage

```javascript
const loadFromLocalStorage = (key, defaultValue) => {
  try {
    const item = localStorage.getItem(key);
    return item ? JSON.parse(item) : defaultValue;
  } catch (error) {
    console.error(`Error loading ${key} from localStorage:`, error);
    return defaultValue;
  }
};

const saveToLocalStorage = (key, value) => {
  try {
    localStorage.setItem(key, JSON.stringify(value));
  } catch (error) {
    console.error(`Error saving ${key} to localStorage:`, error);
  }
};

const clearChatHistory = (channelId) => {
  const messages = loadFromLocalStorage('chat_messages', {});
  if (channelId) {
    messages[channelId] = [];
  } else {
    Object.keys(messages).forEach(key => {
      messages[key] = [];
    });
  }
  saveToLocalStorage('chat_messages', messages);
};
```

### 6. –£—Ç–∏–ª–∏—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```javascript
const formatTime = (timestamp) => {
  const date = new Date(timestamp);
  const hours = date.getHours().toString().padStart(2, '0');
  const minutes = date.getMinutes().toString().padStart(2, '0');
  return `${hours}:${minutes}`;
};

const formatTimeAgo = (timestamp) => {
  const now = Date.now();
  const diff = now - timestamp;
  
  const seconds = Math.floor(diff / 1000);
  const minutes = Math.floor(seconds / 60);
  const hours = Math.floor(minutes / 60);
  const days = Math.floor(hours / 24);
  
  if (days > 0) return `${days}–¥ –Ω–∞–∑–∞–¥`;
  if (hours > 0) return `${hours}—á –Ω–∞–∑–∞–¥`;
  if (minutes > 0) return `${minutes}–º –Ω–∞–∑–∞–¥`;
  return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';
};

const useDebounce = (value, delay) => {
  const [debouncedValue, setDebouncedValue] = useState(value);
  
  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);
    
    return () => {
      clearTimeout(handler);
    };
  }, [value, delay]);
  
  return debouncedValue;
};
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–≥—Ä–æ–π

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ App.jsx

```javascript
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ App
const [chatOpen, setChatOpen] = useState(() => 
  loadFromLocalStorage('chat_is_open', false)
);

// –í JSX –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º —Ç–µ–≥–æ–º
return (
  <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900">
    {/* –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏–≥—Ä—ã */}
    
    {/* –ß–∞—Ç */}
    <ChatPanel 
      player={player}
      isOpen={chatOpen}
      onToggle={() => setChatOpen(prev => !prev)}
    />
    
    <ChatToggleButton
      isOpen={chatOpen}
      unreadCount={getTotalUnreadCount()}
      hasNewMentions={hasNewMentions()}
      onClick={() => setChatOpen(prev => !prev)}
    />
  </div>
);
```

### –†–∞—Å—á–µ—Ç –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

```javascript
const getTotalUnreadCount = () => {
  const channels = loadFromLocalStorage('chat_channels', {});
  return Object.values(channels).reduce((sum, channel) => 
    sum + (channel.unreadCount || 0), 0
  );
};

const hasNewMentions = () => {
  const messages = loadFromLocalStorage('chat_messages', {});
  const playerName = player.name;
  
  return Object.values(messages).some(channelMessages =>
    channelMessages.some(msg => 
      msg.mentions?.includes(playerName) && !msg.read
    )
  );
};
```


## –°–≤–æ–π—Å—Ç–≤–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏

*–°–≤–æ–π—Å—Ç–≤–æ (property) - —ç—Ç–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –∏–ª–∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–ª—è –≤—Å–µ—Ö –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º—ã - –ø–æ —Å—É—Ç–∏, —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –¥–µ–ª–∞—Ç—å. –°–≤–æ–π—Å—Ç–≤–∞ —Å–ª—É–∂–∞—Ç –º–æ—Å—Ç–æ–º –º–µ–∂–¥—É —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–º–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏ –∏ –º–∞—à–∏–Ω–Ω–æ-–ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–º–∏ –≥–∞—Ä–∞–Ω—Ç–∏—è–º–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏.*

### Property Reflection

–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –≤—Å–µ—Ö –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –ø—Ä–∏–µ–º–∫–∏, –≤—ã—è–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –≥—Ä—É–ø–ø—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤:

1. **localStorage round-trip properties** (1.5, 2.4, 5.7, 6.3, 10.8) - –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
2. **Message limit properties** (2.7, 12.1, 12.3) - –≤—Å–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤ 100 —Å–æ–æ–±—â–µ–Ω–∏–π, –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å
3. **Block button properties** (6.1, 7.5) - –æ–±–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ –∫–Ω–æ–ø–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
4. **Settings toggle properties** (10.2-10.7) - –≤—Å–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫, –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å
5. **NPC message template properties** (11.3, 11.6) - –æ–±–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è –∫–∞–Ω–∞–ª–æ–≤

–§–∏–Ω–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–≤–æ–π—Å—Ç–≤ –∏—Å–∫–ª—é—á–∞–µ—Ç –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å –∏ —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

### –°–≤–æ–π—Å—Ç–≤–æ 1: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–∞—Ç–∞

*–î–ª—è –ª—é–±–æ–≥–æ* —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–∞—Ç–∞ (–æ—Ç–∫—Ä—ã—Ç/–∑–∞–∫—Ä—ã—Ç), –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–µ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å.

**Validates: Requirements 1.3, 1.4**

### –°–≤–æ–π—Å—Ç–≤–æ 2: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ localStorage

*–î–ª—è –ª—é–±–æ–≥–æ* —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–∞—Ç–∞ (isOpen, activeChannel, settings, blockedPlayers), —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–ª–∂–Ω—ã –≤–µ—Ä–Ω—É—Ç—å —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

**Validates: Requirements 1.5, 2.4, 5.7, 6.3, 10.8**

### –°–≤–æ–π—Å—Ç–≤–æ 3: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

*–î–ª—è –ª—é–±–æ–≥–æ* –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ–ª—å—à–µ –Ω—É–ª—è, –∫–æ–≥–¥–∞ —á–∞—Ç –∑–∞–∫—Ä—ã—Ç, –∫–Ω–æ–ø–∫–∞ —á–∞—Ç–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å—á–µ—Ç—á–∏–∫ —Å —ç—Ç–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º.

**Validates: Requirements 1.6, 8.1**

### –°–≤–æ–π—Å—Ç–≤–æ 4: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤

*–î–ª—è –ª—é–±–æ–≥–æ* –∫–∞–Ω–∞–ª–∞, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –Ω–µ–≥–æ –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —ç—Ç–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –∏ —Å–±—Ä–æ—Å–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –¥–ª—è –Ω–µ–≥–æ.

**Validates: Requirements 2.3, 2.5**

### –°–≤–æ–π—Å—Ç–≤–æ 5: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

*–î–ª—è –ª—é–±–æ–≥–æ* –∫–∞–Ω–∞–ª–∞ —Å 100 —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–ª–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å–∞–º–æ–µ —Å—Ç–∞—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω—è—è –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–≤–Ω—ã–º 100.

**Validates: Requirements 2.7, 12.1, 12.3**

### –°–≤–æ–π—Å—Ç–≤–æ 6: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–∞–Ω–∞–ª

*–î–ª—è –ª—é–±–æ–≥–æ* –≤–∞–ª–∏–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∫–∞–Ω–∞–ª–∞, –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π —ç—Ç–æ–≥–æ –∫–∞–Ω–∞–ª–∞ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (–∞–≤—Ç–æ—Ä, –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞, —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ).

**Validates: Requirements 3.2, 3.3, 3.4**

### –°–≤–æ–π—Å—Ç–≤–æ 7: –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è

*–î–ª—è –ª—é–±–æ–≥–æ* —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª–∏–Ω–æ–π –±–æ–ª–µ–µ 500 —Å–∏–º–≤–æ–ª–æ–≤, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –∏ –ø–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.

**Validates: Requirements 3.5**

### –°–≤–æ–π—Å—Ç–≤–æ 8: –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

*–î–ª—è –ª—é–±–æ–π* —Å—Ç—Ä–æ–∫–∏, —Å–æ—Å—Ç–æ—è—â–µ–π —Ç–æ–ª—å–∫–æ –∏–∑ –ø—Ä–æ–±–µ–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É.

**Validates: Requirements 3.6**

### –°–≤–æ–π—Å—Ç–≤–æ 9: –ö—É–ª–¥–∞—É–Ω –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

*–î–ª—è –ª—é–±—ã—Ö* –¥–≤—É—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –µ—Å–ª–∏ –º–µ–∂–¥—É –Ω–∏–º–∏ –ø—Ä–æ—à–ª–æ –º–µ–Ω–µ–µ 3 —Å–µ–∫—É–Ω–¥, –≤—Ç–æ—Ä–∞—è –ø–æ–ø—ã—Ç–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –≤—Ä–µ–º–µ–Ω–∏.

**Validates: Requirements 3.7, 3.8**

### –°–≤–æ–π—Å—Ç–≤–æ 10: –í—Å—Ç–∞–≤–∫–∞ —ç–º–æ–¥–∑–∏

*–î–ª—è –ª—é–±–æ–≥–æ* —ç–º–æ–¥–∑–∏ –∏–∑ —Å–ø–∏—Å–∫–∞, –≤—ã–±–æ—Ä –¥–æ–ª–∂–µ–Ω –≤—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –≤ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞.

**Validates: Requirements 4.4**

### –°–≤–æ–π—Å—Ç–≤–æ 11: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∏–∫–µ—Ä–æ–≤

*–î–ª—è –ª—é–±–æ–≥–æ* —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–∏–ø–∞ 'sticker', –æ–Ω–æ –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–∞–∫ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç (—ç–º–æ–¥–∑–∏) –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞.

**Validates: Requirements 4.6**

### –°–≤–æ–π—Å—Ç–≤–æ 12: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ—Ü–µ–Ω–∑—É—Ä–Ω–æ–π –ª–µ–∫—Å–∏–∫–∏

*–î–ª—è –ª—é–±–æ–≥–æ* —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ —Å–ª–æ–≤–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö, –∫–æ–≥–¥–∞ —Ñ–∏–ª—å—Ç—Ä –≤–∫–ª—é—á–µ–Ω, –≤—Å–µ –≤—Ö–æ–∂–¥–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ '***'.

**Validates: Requirements 5.1**

### –°–≤–æ–π—Å—Ç–≤–æ 13: –î–µ—Ç–µ–∫—Ü–∏—è —Å–ø–∞–º–∞

*–î–ª—è –ª—é–±–æ–π* –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑ 3 –∏–¥–µ–Ω—Ç–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–¥—Ä—è–¥ –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–∞ 30 —Å–µ–∫—É–Ω–¥ –∏ –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ.

**Validates: Requirements 5.4, 5.5, 5.6**

### –°–≤–æ–π—Å—Ç–≤–æ 14: –°–∫—Ä—ã—Ç–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤

*–î–ª—è –ª—é–±–æ–≥–æ* —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Å–ø–∏—Å–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤.

**Validates: Requirements 6.2**

### –°–≤–æ–π—Å—Ç–≤–æ 15: –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–≥—Ä–æ–∫–∞

*–î–ª—è –ª—é–±–æ–≥–æ* –∏–≥—Ä–æ–∫–∞ –≤ —Å–ø–∏—Å–∫–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö, —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ —É–¥–∞–ª–∏—Ç—å –µ–≥–æ –∏–∑ —Å–ø–∏—Å–∫–∞ –∏ —Å–Ω–æ–≤–∞ –ø–æ–∫–∞–∑–∞—Ç—å –µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.

**Validates: Requirements 6.5**

### –°–≤–æ–π—Å—Ç–≤–æ 16: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤

*–î–ª—è –ª—é–±–æ–≥–æ* —Å–ø–∏—Å–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤, –µ–≥–æ —Ä–∞–∑–º–µ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 50 —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

**Validates: Requirements 6.6**

### –°–≤–æ–π—Å—Ç–≤–æ 17: –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é —Å–æ–æ–±—â–µ–Ω–∏–π

*–î–ª—è –ª—é–±–æ–≥–æ* —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞, –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –∫—É—Ä—Å–æ—Ä–∞ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π (–æ—Ç–≤–µ—Ç–∏—Ç—å, –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å, –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è).

**Validates: Requirements 7.1, 7.2, 7.3, 7.4, 7.5**

### –°–≤–æ–π—Å—Ç–≤–æ 18: –û—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ

*–î–ª—è –ª—é–±–æ–≥–æ* —Å–æ–æ–±—â–µ–Ω–∏—è, –≤—ã–±–æ—Ä "–æ—Ç–≤–µ—Ç–∏—Ç—å" –¥–æ–ª–∂–µ–Ω —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å replyTo —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —ç—Ç—É —Å—Å—ã–ª–∫—É.

**Validates: Requirements 7.6, 7.7**

### –°–≤–æ–π—Å—Ç–≤–æ 19: –°–±—Ä–æ—Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏

*–î–ª—è –ª—é–±–æ–≥–æ* –∫–∞–Ω–∞–ª–∞ —Å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –æ—Ç–∫—Ä—ã—Ç–∏–µ —á–∞—Ç–∞ –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —ç—Ç–æ—Ç –∫–∞–Ω–∞–ª –¥–æ–ª–∂–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –¥–æ 0.

**Validates: Requirements 8.6**

### –°–≤–æ–π—Å—Ç–≤–æ 20: –í—ã–¥–µ–ª–µ–Ω–∏–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π

*–î–ª—è –ª—é–±–æ–≥–æ* —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ @–∏–º—è_–∏–≥—Ä–æ–∫–∞, –≥–¥–µ –∏–º—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∏–º–µ–Ω–µ–º —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞, —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã–¥–µ–ª–µ–Ω–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º —Å—Ç–∏–ª–µ–º.

**Validates: Requirements 8.4**

### –°–≤–æ–π—Å—Ç–≤–æ 21: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

*–î–ª—è –ª—é–±–æ–≥–æ* –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π N > 0, –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (document.title) –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å "(N)".

**Validates: Requirements 8.7**

### –°–≤–æ–π—Å—Ç–≤–æ 22: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥

*–î–ª—è –ª—é–±–æ–≥–æ* —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞—á–∏–Ω–∞—é—â–µ–≥–æ—Å—è —Å '/', —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –µ–≥–æ –∫–∞–∫ –∫–æ–º–∞–Ω–¥—É, –∞ –Ω–µ –∫–∞–∫ –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

**Validates: Requirements 9.1**

### –°–≤–æ–π—Å—Ç–≤–æ 23: –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥

*–î–ª—è –ª—é–±–æ–≥–æ* –≤–≤–æ–¥–∞, –Ω–∞—á–∏–Ω–∞—é—â–µ–≥–æ—Å—è —Å '/', —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥, –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö—Å—è —Å –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ—Ñ–∏–∫—Å–∞.

**Validates: Requirements 9.7**

### –°–≤–æ–π—Å—Ç–≤–æ 24: –û—à–∏–±–∫–∞ –Ω–µ–≤–µ—Ä–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã

*–î–ª—è –ª—é–±–æ–π* –∫–æ–º–∞–Ω–¥—ã, –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≤ —Å–ø–∏—Å–∫–µ CHAT_COMMANDS, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.

**Validates: Requirements 9.8**

### –°–≤–æ–π—Å—Ç–≤–æ 25: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

*–î–ª—è –ª—é–±–æ–≥–æ* –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ (fontSize, showTimestamps, showAvatars, soundEnabled, profanityFilter, opacity), –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∫ UI –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏.

**Validates: Requirements 10.2, 10.3, 10.4, 10.5, 10.6, 10.7, 10.9**

### –°–≤–æ–π—Å—Ç–≤–æ 26: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è NPC-—Å–æ–æ–±—â–µ–Ω–∏–π

*–î–ª—è –ª—é–±–æ–≥–æ* NPC-—Å–æ–æ–±—â–µ–Ω–∏—è, –æ–Ω–æ –¥–æ–ª–∂–Ω–æ –∏–º–µ—Ç—å —Å–ª—É—á–∞–π–Ω–æ–µ –∏–º—è –∏–∑ —Å–ø–∏—Å–∫–∞ NPC_NAMES, —Å–ª—É—á–∞–π–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (1-50), —Ñ–ª–∞–≥ isNPC=true, –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –∫–∞–Ω–∞–ª–∞.

**Validates: Requirements 11.1, 11.3, 11.4, 11.6**

### –°–≤–æ–π—Å—Ç–≤–æ 27: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ NPC –ø–æ –∫–∞–Ω–∞–ª–∞–º

*–î–ª—è –ª—é–±–æ–≥–æ* –ø–µ—Ä–∏–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏, NPC-—Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è –≤–æ –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–∞—Ö (general, trade, help), –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º.

**Validates: Requirements 11.5**

### –°–≤–æ–π—Å—Ç–≤–æ 28: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ NPC-—Å–æ–æ–±—â–µ–Ω–∏–π

*–î–ª—è –ª—é–±–æ–≥–æ* –∫–∞–Ω–∞–ª–∞, –¥–æ–ª—è NPC-—Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –¥–æ–ª–∂–Ω–∞ –ø—Ä–µ–≤—ã—à–∞—Ç—å 50% –æ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π.

**Validates: Requirements 11.7**

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Å–∏–º–≤–æ–ª–æ–≤

```javascript
const validateMessageLength = (message) => {
  if (message.length > 500) {
    addNotification('–°–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ (–º–∞–∫—Å. 500 —Å–∏–º–≤–æ–ª–æ–≤)', 'error');
    return false;
  }
  return true;
};
```

### –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–æ –≤—Ä–µ–º—è –∫—É–ª–¥–∞—É–Ω–∞

```javascript
const checkCooldown = (lastMessageTime) => {
  const now = Date.now();
  const timeSinceLastMessage = now - lastMessageTime;
  const cooldownDuration = 3000; // 3 —Å–µ–∫—É–Ω–¥—ã
  
  if (timeSinceLastMessage < cooldownDuration) {
    const remaining = Math.ceil((cooldownDuration - timeSinceLastMessage) / 1000);
    addNotification(`–ü–æ–¥–æ–∂–¥–∏—Ç–µ ${remaining} —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π`, 'warning');
    return false;
  }
  return true;
};
```

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞ —Å–ø–∞–º

```javascript
const handleSpamBlock = (blockedUntil) => {
  const now = Date.now();
  if (blockedUntil > now) {
    const remaining = Math.ceil((blockedUntil - now) / 1000);
    addNotification(
      `–í—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –∑–∞ —Å–ø–∞–º –Ω–∞ ${remaining} —Å–µ–∫—É–Ω–¥`, 
      'error'
    );
    return false;
  }
  return true;
};
```

### –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤

```javascript
const validateBlockLimit = (blockedPlayers) => {
  if (blockedPlayers.length >= 50) {
    addNotification(
      '–î–æ—Å—Ç–∏–≥–Ω—É—Ç –º–∞–∫—Å–∏–º—É–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ (50)', 
      'error'
    );
    return false;
  }
  return true;
};
```

### –û—à–∏–±–∫–∞ localStorage

```javascript
const handleStorageError = (error, operation) => {
  console.error(`localStorage ${operation} error:`, error);
  addNotification(
    '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞.', 
    'error'
  );
};
```

### –ù–µ–≤–µ—Ä–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞

```javascript
const handleInvalidCommand = (command) => {
  addNotification(
    `–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞: ${command}. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /help –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥.`,
    'error'
  );
};
```

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–≤–æ–π–Ω–æ–π –ø–æ–¥—Ö–æ–¥ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–°–∏—Å—Ç–µ–º–∞ —á–∞—Ç–∞ –±—É–¥–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–≤—É—Ö –¥–æ–ø–æ–ª–Ω—è—é—â–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤:

1. **Unit-—Ç–µ—Å—Ç—ã**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤, –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ –∏ —É—Å–ª–æ–≤–∏–π –æ—à–∏–±–æ–∫
2. **Property-based —Ç–µ—Å—Ç—ã**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤ –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–û–±–∞ –ø–æ–¥—Ö–æ–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è: unit-—Ç–µ—Å—Ç—ã –ª–æ–≤—è—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –±–∞–≥–∏, property-—Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –æ–±—â—É—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å.

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è property-based —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–î–ª—è React/JavaScript –ø—Ä–æ–µ–∫—Ç–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è **fast-check** - –∑—Ä–µ–ª–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è property-based —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ JavaScript/TypeScript.

–£—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
npm install --save-dev fast-check
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è property-—Ç–µ—Å—Ç–æ–≤

–ö–∞–∂–¥—ã–π property-—Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω:
- –í—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –º–∏–Ω–∏–º—É–º **100 –∏—Ç–µ—Ä–∞—Ü–∏–π** (–∏–∑-–∑–∞ —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–∏)
- –ò–º–µ—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π-—Ç–µ–≥: **Feature: global-chat-system, Property N: [—Ç–µ–∫—Å—Ç —Å–≤–æ–π—Å—Ç–≤–∞]**
- –°—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–≤–æ–π—Å—Ç–≤–æ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–∏–∑–∞–π–Ω–∞

–ü—Ä–∏–º–µ—Ä:
```javascript
// Feature: global-chat-system, Property 5: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
test('channel message limit property', () => {
  fc.assert(
    fc.property(
      fc.array(fc.anything(), { minLength: 101, maxLength: 200 }),
      (messages) => {
        const channel = { messages: [], maxMessages: 100 };
        messages.forEach(msg => addMessageToChannel(channel, msg));
        expect(channel.messages.length).toBe(100);
      }
    ),
    { numRuns: 100 }
  );
});
```

### –ë–∞–ª–∞–Ω—Å unit –∏ property —Ç–µ—Å—Ç–æ–≤

**Unit-—Ç–µ—Å—Ç—ã —Ñ–æ–∫—É—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞:**
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –ì—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö (–ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞, –Ω—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
- –£—Å–ª–æ–≤–∏—è—Ö –æ—à–∏–±–æ–∫ (–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤, –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

**Property-—Ç–µ—Å—Ç—ã —Ñ–æ–∫—É—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞:**
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–º –ø–æ–∫—Ä—ã—Ç–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—é
- –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö —Å–∏—Å—Ç–µ–º—ã (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)

–ò–∑–±–µ–≥–∞–π—Ç–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ unit-—Ç–µ—Å—Ç–æ–≤ - property-based —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**Unit-—Ç–µ—Å—Ç—ã:**
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è "Hello" –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –∫–∞–Ω–∞–ª
- –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ "" –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è
- –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª–∏–Ω–æ–π —Ä–æ–≤–Ω–æ 500 —Å–∏–º–≤–æ–ª–æ–≤ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è
- –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª–∏–Ω–æ–π 501 —Å–∏–º–≤–æ–ª –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è
- –ö–æ–º–∞–Ω–¥–∞ "/help" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–≥—Ä–æ–∫–∞ "Player1" —Å–∫—Ä—ã–≤–∞–µ—Ç –µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

**Property-—Ç–µ—Å—Ç—ã:**
- –î–ª—è –ª—é–±–æ–≥–æ –≤–∞–ª–∏–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –∫–∞–Ω–∞–ª (Property 6)
- –î–ª—è –ª—é–±–æ–π —Å—Ç—Ä–æ–∫–∏ –∏–∑ –ø—Ä–æ–±–µ–ª–æ–≤, –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è (Property 8)
- –î–ª—è –ª—é–±–æ–≥–æ –∫–∞–Ω–∞–ª–∞ —Å–æ 100 —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä–µ–π—à–µ–µ (Property 5)
- –î–ª—è –ª—é–±–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–∞—Ç–∞, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç (Property 2)
- –î–ª—è –ª—é–±–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö, —Ä–∞–∑–º–µ—Ä ‚â§ 50 (Property 16)

### –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è property-—Ç–µ—Å—Ç–æ–≤

```javascript
// –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π
const messageGenerator = fc.record({
  id: fc.string(),
  channelId: fc.constantFrom('general', 'trade', 'help'),
  author: fc.record({
    id: fc.string(),
    name: fc.string({ minLength: 1, maxLength: 20 }),
    level: fc.integer({ min: 1, max: 50 }),
    avatarId: fc.integer({ min: 1, max: 15 }),
    isNPC: fc.boolean()
  }),
  content: fc.string({ maxLength: 500 }),
  timestamp: fc.integer({ min: 0 }),
  type: fc.constantFrom('text', 'sticker', 'system')
});

// –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
const settingsGenerator = fc.record({
  fontSize: fc.constantFrom('small', 'medium', 'large'),
  showTimestamps: fc.boolean(),
  showAvatars: fc.boolean(),
  soundEnabled: fc.boolean(),
  profanityFilter: fc.boolean(),
  opacity: fc.integer({ min: 0, max: 100 })
});

// –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–∞—Ç–∞
const chatStateGenerator = fc.record({
  isOpen: fc.boolean(),
  activeChannelId: fc.constantFrom('general', 'trade', 'help'),
  blockedPlayers: fc.array(fc.string(), { maxLength: 50 }),
  settings: settingsGenerator
});
```

